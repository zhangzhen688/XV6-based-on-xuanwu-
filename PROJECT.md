# 项目计划：面向玄铁C910的轻量级多任务操作系统（基于 RISC-V RV64GC）

## 一、项目概述

本项目旨在从零实现一个轻量级、可用于教学与实验的多任务操作系统，针对玄铁（XuanTie）系列处理器的特性进行硬件适配与优化，包含内核引导、内存管理、进程调度、并发控制、外设驱动与日志文件系统等子系统。

## 二、技术栈

- RISC-V 汇编（引导、异常/中断处理、上下文切换）
- C / C++（内核逻辑、驱动）
- MMU 与页表（Sv39）、虚拟内存机制
- 并发原语（Spinlock、Sleeplock）、中断控制（PLIC/CLINT）

## 三、里程碑（建议）

1. 环境与工具链准备（1 周）
   - 配置交叉编译器、QEMU、调试工具
2. 引导与最小内核（2 周）
   - 实现 Bootloader -> SBI -> 内核初始化，打印控制台
3. 基本进程与调度（2 周）
   - 实现进程创建、抢占式调度、上下文切换
4. 虚拟内存与 MMU（3 周）
   - 实现 Sv39 页表、内核/用户地址空间分离、页表管理接口
5. 并发控制与内存优化（2 周）
   - 自旋锁/睡眠锁，CoW 实现与测试
6. 外设驱动与文件系统（3-4 周）
   - UART、磁盘驱动；实现支持 Journaling 的简单文件系统
7. 集成测试与文档（持续）

## 四、初始任务分解（可开 issue）

- `toolchain`: 编写工具链安装与校验脚本
- `boot`: 代码用于实现引导流程与早期 init
- `mmu`: 页表与地址空间管理模块
- `proc`: 进程/调度/上下文切换模块
- `sync`: 自旋锁、睡眠锁与中断控制
- `fs`: 日志文件系统与磁盘驱动
- `ci`: GitHub Actions 工作流（自动构建与静态检查）

## 五、建议的 CI（示例）

- 在每次 PR/merge 时运行：静态检查（`clang-format`/`cppcheck`）、make 构建、简单单元/集成测试（若可用 QEMU 执行）。

---

如果你确认这个计划，我可以：

1. 在仓库里创建这些目录结构与模板文件（`boot/`, `mmu/`, `proc/`, 等）。
2. 添加一个基础的 GitHub Actions 工作流用于构建。
3. 根据里程碑创建对应的 GitHub Issues/Project（需 GitHub 访问权限）。

请告诉我想先做哪一项，我就继续。 

## 项目进度

- Day 1（2025-12-28）：完成工程环境搭建、仓库初始化、README/PROJECT 文档添加，并确立项目主要 flag（见 README 中项目名称与目标要点）。

 说明：今天的目标是搭建好环境并明确里程碑与技术栈，为后续开发打好基础。
